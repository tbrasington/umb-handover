<!doctype html>
<html>
    <head>
        <title>Parcel Sandbox</title>
        <meta charset="UTF-8" />
        <link href="./src/styles.css" rel="stylesheet" />
        <link href="./src/ella.css" rel="stylesheet" />
    </head>

    <body>
        <div id="app">
            <section class="feature-pill-section">
                <div class="feature-pill-stack">
                    <span id="gradient-line"></span>
                    <div class="feature-pill small-label">
                        <svg
                            width="100%"
                            height="100%"
                            viewBox="0 0 17 17"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M11.8359 7.19542C11.9282 7.48544 11.6921 7.75707 11.3878 7.75707H9.07781C8.89919 7.75707 8.73413 7.66178 8.64481 7.50709L7.48965 5.50648C7.33737 5.24275 7.45472 4.90239 7.75229 4.83763C7.99321 4.7852 8.24338 4.75758 8.5 4.75758C10.0627 4.75758 11.3862 5.78172 11.8359 7.19542Z"
                                fill="#AC43FF"
                            />
                            <path
                                d="M5.91292 5.90021C6.11819 5.67508 6.47178 5.7435 6.62412 6.00734L7.77878 8.00708C7.8681 8.16178 7.86811 8.35239 7.77879 8.5071L6.62385 10.5075C6.4715 10.7714 6.11786 10.8398 5.91261 10.6146C5.34568 9.99263 5 9.16548 5 8.25758C5 7.34952 5.34581 6.52223 5.91292 5.90021Z"
                                fill="#AC43FF"
                            />
                            <path
                                d="M7.75184 11.6774C7.4543 11.6126 7.33698 11.2723 7.48923 11.0086L8.64482 9.00707C8.73414 8.85237 8.89921 8.75707 9.07784 8.75707H11.3881C11.6924 8.75707 11.9284 9.0286 11.8363 9.3186C11.3869 10.7329 10.0631 11.7576 8.5 11.7576C8.24322 11.7576 7.99289 11.7299 7.75184 11.6774Z"
                                fill="#AC43FF"
                            />
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M14.5005 8.75707C14.7766 8.75707 15.0005 8.53322 15.0005 8.25707C15.0005 7.98093 14.7766 7.75707 14.5005 7.75707H13.9781C13.9502 7.44764 13.8967 7.1456 13.8197 6.85309L14.3095 6.6748C14.569 6.58035 14.7028 6.29343 14.6084 6.03394C14.5139 5.77446 14.227 5.64066 13.9675 5.73511L13.4776 5.91342C13.3463 5.63514 13.1924 5.36964 13.0182 5.1193L13.4181 4.78378C13.6296 4.60628 13.6572 4.29091 13.4797 4.07937C13.3022 3.86783 12.9868 3.84024 12.7753 4.01774L12.3751 4.35354C12.158 4.13803 11.923 3.9405 11.6725 3.76338L11.9334 3.31144C12.0715 3.07229 11.9896 2.7665 11.7504 2.62843C11.5113 2.49035 11.2055 2.57229 11.0674 2.81144L10.8069 3.26259C10.531 3.13494 10.2427 3.02949 9.94427 2.94853L10.0347 2.43554C10.0827 2.16359 9.90109 1.90426 9.62914 1.85631C9.35719 1.80836 9.09786 1.98995 9.04991 2.26189L8.95927 2.77594C8.808 2.76344 8.65499 2.75707 8.50049 2.75707C8.34598 2.75707 8.19293 2.76346 8.04159 2.77597L7.95095 2.26192C7.90299 1.98997 7.64367 1.80839 7.37172 1.85634C7.09977 1.90429 6.91819 2.16362 6.96614 2.43557L7.05661 2.94868C6.75833 3.02965 6.47004 3.13508 6.19409 3.2627L5.93345 2.81132C5.79537 2.57218 5.48958 2.49025 5.25044 2.62833C5.01129 2.76641 4.92937 3.07221 5.06745 3.31135L5.32849 3.76344C5.07815 3.94047 4.84322 4.13793 4.62614 4.3534L4.22563 4.01733C4.01409 3.83983 3.69871 3.86742 3.52121 4.07895C3.34371 4.29049 3.3713 4.60587 3.58284 4.78337L3.98299 5.11913C3.80872 5.36954 3.65473 5.63515 3.52339 5.91356L3.03337 5.73521C2.77388 5.64076 2.48696 5.77456 2.39251 6.03405C2.29807 6.29354 2.43186 6.58046 2.69135 6.6749L3.1813 6.85323C3.10431 7.14569 3.0508 7.44768 3.02291 7.75707H2.50049C2.22435 7.75707 2.00049 7.98093 2.00049 8.25707C2.00049 8.53322 2.22435 8.75707 2.50049 8.75707H3.02291C3.05079 9.06647 3.10429 9.36848 3.18128 9.66097L2.69119 9.83935C2.4317 9.93379 2.2979 10.2207 2.39235 10.4802C2.4868 10.7397 2.77372 10.8735 3.03321 10.779L3.52335 10.6006C3.6547 10.8791 3.80873 11.1448 3.98307 11.3953L3.58274 11.7312C3.3712 11.9087 3.34361 12.2241 3.52111 12.4356C3.69861 12.6471 4.01399 12.6747 4.22553 12.4972L4.62627 12.161C4.84338 12.3764 5.07836 12.5739 5.3288 12.751L5.06741 13.2037C4.92934 13.4429 5.01128 13.7487 5.25042 13.8868C5.48957 14.0248 5.79537 13.9429 5.93344 13.7037L6.19441 13.2517C6.47026 13.3793 6.75848 13.4847 7.05676 13.5656L6.96613 14.0796C6.91818 14.3515 7.09977 14.6109 7.37171 14.6588C7.64366 14.7068 7.90299 14.5252 7.95094 14.2532L8.04175 13.7382C8.19301 13.7507 8.34601 13.7571 8.50049 13.7571C8.65493 13.7571 8.80788 13.7507 8.9591 13.7382L9.04992 14.2533C9.09787 14.5252 9.3572 14.7068 9.62914 14.6588C9.90109 14.6109 10.0827 14.3516 10.0347 14.0796L9.9441 13.5657C10.2424 13.4847 10.5307 13.3793 10.8065 13.2517L11.0674 13.7036C11.2055 13.9428 11.5113 14.0247 11.7505 13.8867C11.9896 13.7486 12.0715 13.4428 11.9335 13.2036L11.6721 12.751C11.9227 12.5739 12.1577 12.3763 12.3749 12.1608L12.7754 12.4968C12.9869 12.6743 13.3023 12.6467 13.4798 12.4352C13.6573 12.2237 13.6297 11.9083 13.4182 11.7308L13.0181 11.3951C13.1923 11.1447 13.3463 10.8791 13.4776 10.6008L13.9677 10.7791C14.2272 10.8736 14.5141 10.7398 14.6085 10.4803C14.703 10.2208 14.5692 9.9339 14.3097 9.83945L13.8197 9.6611C13.8967 9.36857 13.9502 9.06652 13.9781 8.75707H14.5005ZM12.729 6.71798C12.7249 6.7069 12.7213 6.69576 12.7181 6.68459C12.5396 6.2059 12.2818 5.76578 11.9609 5.38015C11.9564 5.37519 11.9519 5.37012 11.9476 5.36494C11.9433 5.35987 11.9392 5.35474 11.9352 5.34956C11.6084 4.96385 11.2177 4.63392 10.7796 4.37607C10.7698 4.37122 10.76 4.36603 10.7504 4.36048C10.7405 4.35477 10.7309 4.34878 10.7216 4.34253C10.2921 4.09831 9.81852 3.92274 9.31572 3.83073C9.30446 3.82952 9.29316 3.82792 9.28184 3.82593C9.27088 3.82399 9.26006 3.82172 9.2494 3.81911C9.00584 3.77831 8.75564 3.75707 8.50049 3.75707C8.24554 3.75707 7.99568 3.77823 7.75252 3.81888C7.74152 3.82159 7.73034 3.82396 7.71901 3.82596C7.7073 3.82802 7.6956 3.82966 7.68395 3.83089C7.16999 3.92502 6.68696 4.10643 6.25032 4.35909C5.79838 4.62061 5.3963 4.95826 5.06154 5.35445C5.05885 5.35784 5.0561 5.3612 5.0533 5.36453C5.05188 5.36622 5.05045 5.3679 5.04902 5.36957C5.04751 5.37132 5.046 5.37305 5.04447 5.37477C4.72132 5.76182 4.46205 6.20389 4.28272 6.68483C4.27952 6.69596 4.27592 6.70705 4.2719 6.71809C4.26788 6.72913 4.26351 6.73995 4.25881 6.75053C4.09151 7.2216 4.00049 7.72874 4.00049 8.25707C4.00049 8.78664 4.09196 9.29485 4.25998 9.76675C4.26417 9.77637 4.2681 9.78617 4.27174 9.79617C4.27537 9.80614 4.27866 9.81615 4.28162 9.8262C4.64665 10.8073 5.34409 11.6266 6.23703 12.1472C6.23956 12.1486 6.24207 12.15 6.24459 12.1514C6.24654 12.1525 6.24848 12.1536 6.25042 12.1547C6.2551 12.1574 6.25972 12.1602 6.26427 12.163C6.70287 12.4146 7.18788 12.5945 7.7033 12.6867C7.70853 12.6874 7.71377 12.6883 7.71901 12.6892C7.7239 12.6901 7.72875 12.691 7.73358 12.692C7.98281 12.7348 8.23904 12.7571 8.50049 12.7571C8.76196 12.7571 9.01823 12.7348 9.26749 12.692C9.27225 12.691 9.27703 12.6901 9.28185 12.6892C9.28703 12.6883 9.2922 12.6875 9.29737 12.6867C9.81166 12.5948 10.2957 12.4156 10.7335 12.1648C10.7391 12.1613 10.7447 12.1579 10.7505 12.1546C10.756 12.1514 10.7615 12.1484 10.7671 12.1454C11.2133 11.8847 11.6107 11.5494 11.942 11.1566L11.9477 11.1496L11.9539 11.1424C12.2786 10.7541 12.5391 10.3103 12.719 9.82719C12.722 9.81685 12.7254 9.80654 12.7291 9.79627C12.7329 9.78597 12.7369 9.77587 12.7413 9.76598C12.9091 9.29429 13.0005 8.78636 13.0005 8.25707C13.0005 7.72871 12.9094 7.22161 12.7421 6.75061C12.7374 6.73997 12.733 6.72909 12.729 6.71798Z"
                                fill="#AC43FF"
                            />
                        </svg>
                        Campaign Settings
                    </div>
                    <div class="feature-pill small-label">
                        <svg>...</svg>
                        Prize Configuration
                    </div>
                    <div class="feature-pill small-label">
                        <svg>...</svg>
                        Validation Rules
                    </div>
                    <div class="feature-pill small-label">
                        <svg>...</svg>
                        Territory Setup
                    </div>
                    <div class="feature-pill small-label">
                        <svg>...</svg>
                        Winner Management
                    </div>
                </div>
                <div class="glowing-e">
                    <svg
                        width="100%"
                        height="100%"
                        viewBox="0 0 120 95"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M37.7386 94.1189C38.6659 94.1189 39.4159 93.3689 39.4159 92.4416V79.9643C39.4159 79.037 38.6591 78.2871 37.7386 78.2871H28.1591C22.3363 78.2871 18.3068 74.9393 17.1068 69.103C16.2818 65.2575 15.8795 58.1734 15.8795 47.4621V47.0257C15.8795 36.3143 16.2818 29.2303 17.1068 25.3712C18.3 19.5485 22.3295 16.2007 28.1522 16.2007H37.7318C38.6591 16.2007 39.4091 15.4439 39.4091 14.5234V2.04616C39.4091 1.11889 38.6523 0.368896 37.7318 0.368896H28.1522C14.4204 0.368896 4.37726 8.52344 1.92954 21.6484L1.91589 21.7234L1.89541 21.7984C0.429504 27.2393 0.136353 35.4893 0.136353 47.0393V47.4757C0.136353 59.0189 0.429504 67.2689 1.89541 72.7166L1.91589 72.7916L1.92954 72.8666C4.37726 85.9916 14.4204 94.1462 28.1522 94.1462H37.7318L37.7386 94.1189Z"
                            fill="#F8F8F8"
                        />
                        <path
                            d="M44.8977 63.6143C41.2432 59.5575 39.4159 54.0893 39.4159 47.2166C39.4159 42.7234 40.2409 38.7893 41.8909 35.4075C43.5409 32.0257 45.9341 29.4143 49.0773 27.5734C52.2137 25.7325 55.9227 24.812 60.1977 24.812C66.4773 24.812 71.4545 26.6393 75.1364 30.2939C78.8182 33.9484 80.6591 39.1575 80.6591 45.9211V48.8461C80.6591 49.6575 80.4409 50.2643 80.0114 50.6734C79.575 51.0825 79.0091 51.2802 78.3068 51.2802H52.8136C52.2205 51.2802 51.9205 51.6075 51.9205 52.2552C51.975 54.6347 52.8273 56.5302 54.4773 57.9347C56.1273 59.3393 58.0636 60.0484 60.2796 60.0484C63.4227 60.0484 65.6659 58.9643 67.0159 56.803C67.6091 55.8825 68.3386 55.4188 69.2114 55.4188H77.8977C78.3818 55.4188 78.7909 55.6098 79.1182 55.9848C79.4455 56.3666 79.5273 56.8507 79.3636 57.4439C78.3341 61.1802 76.1728 64.1529 72.8659 66.3757C69.5659 68.5916 65.3727 69.7029 60.2796 69.7029C53.6796 69.7029 48.5523 67.6711 44.8977 63.6143ZM52.7386 42.4302H67.9228C68.4068 42.4302 68.6523 42.1575 68.6523 41.6188C68.6523 39.4507 67.8682 37.6575 66.3 36.2189C64.7318 34.787 62.7 34.0711 60.2113 34.0711C57.9409 34.0711 55.9909 34.8007 54.3682 36.2666C52.7455 37.7257 51.9068 39.512 51.8523 41.6257C51.8523 42.1643 52.1523 42.437 52.7455 42.437L52.7386 42.4302Z"
                            fill="#F8F8F8"
                        />
                        <path
                            d="M82.3365 94.1189C81.4092 94.1189 80.6592 93.3689 80.6592 92.4416V79.9643C80.6592 79.037 81.416 78.2871 82.3365 78.2871H91.916C97.7387 78.2871 101.768 74.9393 102.968 69.103C103.793 65.2575 104.196 58.1734 104.196 47.4621V47.0257C104.196 36.3143 103.793 29.2303 102.968 25.3712C101.775 19.5485 97.7456 16.2007 91.9228 16.2007H82.3433C81.416 16.2007 80.666 15.4439 80.666 14.5234V2.04616C80.666 1.11889 81.4228 0.368896 82.3433 0.368896H91.9228C105.655 0.368896 115.698 8.52344 118.146 21.6484L118.159 21.7234L118.18 21.7984C119.646 27.2393 119.939 35.4893 119.939 47.0393V47.4757C119.939 59.0189 119.646 67.2689 118.18 72.7166L118.159 72.7916L118.146 72.8666C115.698 85.9916 105.655 94.1462 91.9228 94.1462H82.3433L82.3365 94.1189Z"
                            fill="#F8F8F8"
                        />
                    </svg>
                </div>
                <div class="feature-pill-stack feature-ouput-stack">
                    <span id="gradient-line-output"></span>
                    <div class="pill-wrapper hidden">
                        <div class="feature-output-pill small-label hidden">
                            <svg>...</svg>
                            Receipt Validation
                        </div>
                    </div>
                    <div class="pill-wrapper hidden">
                        <div class="feature-output-pill small-label hidden">
                            <svg>...</svg>
                            Prize Fulfilment
                        </div>
                    </div>
                    <div class="pill-wrapper hidden">
                        <div class="feature-output-pill small-label hidden">
                            <svg>...</svg>
                            Analytics
                        </div>
                    </div>
                    <div class="pill-wrapper hidden">
                        <div class="feature-output-pill small-label hidden">
                            <svg>...</svg>
                            Prize Distribution
                        </div>
                    </div>
                    <div class="pill-wrapper hidden">
                        <div class="feature-output-pill small-label hidden">
                            <svg>...</svg>
                            Automatic Winner Selection
                        </div>
                    </div>
                    <div class="pill-wrapper hidden">
                        <div class="feature-output-pill small-label hidden">
                            <svg>...</svg>
                            Fraud Detection
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <script type="module">
            import { animate, scroll, stagger } from "motion";

            // Initialize feature pills
            const featurePills = Array.from(
                document.querySelectorAll(".feature-pill"),
            );
            const outputPills = Array.from(
                document.querySelectorAll(".feature-output-pill"),
            ).reverse();
            const pillWrappers = Array.from(
                document.querySelectorAll(".pill-wrapper"),
            ).reverse();
            const gradientLine = document.getElementById("gradient-line");
            const gradientLineOutput = document.getElementById(
                "gradient-line-output",
            );
            let currentOutputIndex = 0;

            function initializeElements() {
                // Reset feature pills
                featurePills.forEach((pill) => {
                    pill.style.opacity = "0";
                    pill.style.transform = "translateY(-20px)";
                });

                // Reset output pills
                outputPills.forEach((pill) => {
                    pill.style.opacity = "0";
                    pill.style.transform = "translateY(-20px)";
                });

                // Reset gradient lines
                gradientLine.style.opacity = "0";
                gradientLine.style.transform = "scaleY(0)";
                gradientLineOutput.style.opacity = "0";
                gradientLineOutput.style.transform = "scaleY(0)";

                // Reset pill height
                const pillHeight = document.querySelector(
                    ".feature-output-pill",
                ).offsetHeight;
                document.documentElement.style.setProperty(
                    "--pill-height",
                    `${pillHeight + 2}px`,
                );
            }

            function startEntryAnimation() {
                // Animate feature pills
                featurePills.reverse().forEach((pill, i) => {
                    animate(
                        pill,
                        {
                            opacity: 1,
                            transform: "translateY(0px)",
                        },
                        {
                            delay: i * 0.3,
                            duration: 0.5,
                            easing: "ease-out",
                        },
                    );
                });

                // Animate gradient lines
                animate(
                    gradientLine,
                    {
                        opacity: 1,
                        scaleY: [0, "100%"],
                    },
                    {
                        delay: 0.2,
                        duration: 0.8,
                        easing: "ease-out",
                    },
                );

                animate(
                    gradientLineOutput,
                    {
                        opacity: 1,
                        scaleY: [0, "100%"],
                    },
                    {
                        delay: 0.2,
                        duration: 0.8,
                        easing: "ease-out",
                    },
                );
            }

            async function fadeOutAll() {
                // Fade out all feature pills
                const fadeOutPromises = featurePills.map(
                    (pill) =>
                        animate(
                            pill,
                            {
                                opacity: 0,
                                transform: "translateY(-20px)",
                            },
                            {
                                duration: 0.5,
                                easing: "ease-in",
                            },
                        ).finished,
                );

                // Fade out all output pills
                pillWrappers.forEach((wrapper) => {
                    wrapper.classList.remove("visible");
                    const pill = wrapper.querySelector(".feature-output-pill");
                    animate(
                        pill,
                        {
                            opacity: 0,
                            transform: "translateY(-20px)",
                        },
                        {
                            duration: 0.5,
                            easing: "ease-in",
                        },
                    );
                });

                // Fade out gradient lines
                animate(
                    gradientLine,
                    {
                        opacity: 0,
                        scaleY: 0,
                    },
                    {
                        duration: 0.5,
                        easing: "ease-in",
                    },
                );

                animate(
                    gradientLineOutput,
                    {
                        opacity: 0,
                        scaleY: 0,
                    },
                    {
                        duration: 0.5,
                        easing: "ease-in",
                    },
                );

                // Wait for all animations to complete
                await Promise.all(fadeOutPromises);

                // Reset and restart after a delay
                setTimeout(() => {
                    initializeElements();
                    startEntryAnimation();
                    currentOutputIndex = 0;
                    setTimeout(animateNextOutputPill, 0);
                }, 0);
            }

            function animateNextOutputPill() {
                if (currentOutputIndex >= pillWrappers.length) {
                    fadeOutAll();
                    return;
                }

                const currentWrapper = pillWrappers[currentOutputIndex];
                const currentPill = currentWrapper.querySelector(
                    ".feature-output-pill",
                );

                // Remove active class from previous pills
                document
                    .querySelectorAll(".feature-output-pill")
                    .forEach((pill) => {
                        pill.classList.remove("active");
                    });

                // Show wrapper and animate pill
                currentWrapper.classList.add("visible");

                animate(
                    currentPill,
                    {
                        opacity: [0, 1],
                        transform: ["translateY(-20px)", "translateY(0px)"],
                    },
                    {
                        duration: 0.5,
                        easing: "ease-out",
                    },
                );

                currentPill.classList.add("active");

                // Update opacity for all visible pills
                pillWrappers.forEach((wrapper, index) => {
                    if (index < currentOutputIndex) {
                        const pill = wrapper.querySelector(
                            ".feature-output-pill",
                        );
                        const opacity = 1 - (currentOutputIndex - index) * 0.2;
                        pill.style.opacity = Math.max(0.2, opacity);
                    }
                });

                currentOutputIndex++;
                setTimeout(animateNextOutputPill, 1500);
            }

            // Start the initial animation
            initializeElements();
            startEntryAnimation();
            setTimeout(animateNextOutputPill, 500);
        </script>
    </body>
</html>
